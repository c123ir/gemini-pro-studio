# راهنمای استفاده از سرور ساده (Simple Server)

## معرفی

سرور ساده یک راه‌حل موقت برای توسعه فرانت‌اند بدون نیاز به راه‌اندازی کامل بک‌اند با Prisma است. این سرور API‌های مورد نیاز را برای احراز هویت، مدیریت گفتگو‌ها و ارتباط با AI فراهم می‌کند.

## پیش‌نیازها

- Node.js نسخه 18 یا بالاتر
- NPM نسخه 9 یا بالاتر

## راه‌اندازی

برای راه‌اندازی سرور ساده، دستورات زیر را در ترمینال اجرا کنید:

```bash
# حرکت به پوشه بک‌اند
cd backend

# اجرای سرور ساده
npm run simple

# یا برای توسعه با قابلیت بارگذاری مجدد خودکار
npm run dev:simple
```

سرور در پورت 5150 راه‌اندازی می‌شود و می‌توانید از طریق آدرس زیر به آن دسترسی پیدا کنید:
http://localhost:5150

## نقاط پایانی API (Endpoints)

### مسیرهای عمومی

- `GET /` - صفحه اصلی API با اطلاعات کلی
- `GET /health` - بررسی وضعیت سلامت سرور

### مسیرهای احراز هویت

- `POST /api/auth/login` - ورود به سیستم
- `POST /api/auth/register` - ثبت‌نام در سیستم
- `GET /api/auth/profile` - دریافت پروفایل کاربر
- `PUT /api/auth/profile` - به‌روزرسانی پروفایل کاربر
- `POST /api/auth/logout` - خروج از سیستم

### مسیرهای گفتگو

- `GET /api/conversations` - دریافت لیست گفتگوها
- `POST /api/conversations` - ایجاد گفتگوی جدید
- `GET /api/conversations/:id` - دریافت اطلاعات یک گفتگو

### مسیرهای پیام

- `GET /api/messages?conversationId=123` - دریافت پیام‌های یک گفتگو
- `POST /api/messages` - ارسال پیام جدید

### مسیرهای هوش مصنوعی

- `POST /api/v1/ai/chat` - ارسال پیام به چت هوش مصنوعی
- `POST /api/v1/ai/images/analyze` - تحلیل تصویر با هوش مصنوعی

## داده‌های آزمایشی

سرور ساده با داده‌های آزمایشی پیش‌فرض راه‌اندازی می‌شود:

### کاربران

- کاربر عادی:
  - ایمیل: `test@example.com`
  - رمز عبور: `123456`

- مدیر سیستم:
  - ایمیل: `admin@example.com`
  - رمز عبور: `admin123`

### گفتگوها و پیام‌ها

یک گفتگوی آزمایشی با دو پیام برای کاربر عادی وجود دارد.

## نمونه‌های درخواست API

### ورود به سیستم

```bash
curl -X POST http://localhost:5150/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email": "test@example.com", "password": "123456"}'
```

### ایجاد گفتگوی جدید

```bash
curl -X POST http://localhost:5150/api/conversations \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{"title": "گفتگوی جدید", "description": "توضیحات گفتگو", "modelName": "gemini-pro"}'
```

### ارسال پیام

```bash
curl -X POST http://localhost:5150/api/messages \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{"conversationId": "1", "content": "سلام، چطوری؟"}'
```

## محدودیت‌ها

1. این سرور از پایگاه داده واقعی استفاده نمی‌کند و همه داده‌ها در حافظه ذخیره می‌شوند.
2. با راه‌اندازی مجدد سرور، تمام داده‌های جدید از بین می‌روند.
3. این سرور فقط برای توسعه و آزمایش فرانت‌اند مناسب است و برای محیط تولید مناسب نیست.

## چگونگی انتقال به سرور اصلی

در آینده، پس از رفع مشکلات Prisma، می‌توانید به سرور اصلی منتقل شوید. API‌های سرور ساده و سرور اصلی سازگار هستند، بنابراین نیازی به تغییر در فرانت‌اند نخواهد بود. 